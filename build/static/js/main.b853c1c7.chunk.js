(this["webpackJsonpapi-test-spa"]=this["webpackJsonpapi-test-spa"]||[]).push([[0],{135:function(e,t,n){},158:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var c=n(58),a=n(0),i=n.n(a),o=n(22),s=n.n(o),r=n(63),l=n(23),u=n(24),j=n(9),h=new(function(){function e(){Object(l.a)(this,e),this.isLogin=!!window.localStorage.getItem("Authorization"),Object(j.m)(this,{isLogin:j.n,setLoginStatus:j.f})}return Object(u.a)(e,[{key:"setLoginStatus",value:function(e){this.isLogin=e,e||window.localStorage.removeItem("Authorization")}}]),e}()),b={globalStore:h},d=(n(135),n(28)),p=n(27),m=n(40),O=n(17),f=n(6),g=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log(this)}},{key:"render",value:function(){var e=Object.assign({},this.props),t=h.isLogin,n=this.props.children;return console.log(t,h,"privateRouter"),t?Object(f.jsx)(O.b,Object(c.a)(Object(c.a)({},e),{},{component:n})):Object(f.jsx)(O.a,{to:{pathname:"/login"}})}}]),n}(a.Component),x=n(128),v=n(233),w=n(234),y=n(235),k=n(127),C=n(117),F=n.n(C).a.create({baseURL:"http://localhost:3002/api/",timeout:5e3,headers:{Authorization:localStorage.getItem("Authorization")},withCredentials:!0}),N="/login",S="/private/logout",L="/private/uploadFile",z="/private/getFileList",I="/private/delete",A="/private/cookie";function P(e,t){return localStorage.getItem("Authorization")&&(F.defaults.headers.Authorization=localStorage.getItem("Authorization")),new Promise((function(n,c){F.post(e,t).then((function(e){console.log(e),401===e.data.code&&(h.setLoginStatus(!1),window.location.href=window.location.origin+"/login"),e.headers["www-authenticate"]&&(localStorage.setItem("Authorization",e.headers["www-authenticate"]),h.setLoginStatus(!0)),n(e.data)})).catch((function(e){c(e)}))}))}var D,R=function(e){return P(S,e)},M=function(e){return P(A,e)},T=(n(158),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onFinish=function(e){console.log("Success:",e)},c.onFinishFailed=function(e){console.log("Failed:",e)},c.usernameChange=function(e){var t=e.target.value;console.log(t,"change"),c.setState({username:t})},c.passwordChange=function(e){var t=e.target.value;c.setState({password:t})},c.submit=function(e){var t,n=c.state,a=n.username,i=n.password;(t={username:a,password:i},P(N,t)).then((function(e){1===e.code&&x.b.success(e.msg),2===e.code&&x.b.warning(e.msg),console.log(c.props,c.props.history),c.props.history.push("/panel"),console.log("globalStore",h)}))},c.state={username:""},c}return Object(u.a)(n,[{key:"componentDidMount",value:function(){h.isLogin&&this.props.history.push("/panel")}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"login wh-full flex jc-c ai-c",children:Object(f.jsx)("div",{className:"content flex jc-c ai-c",children:Object(f.jsxs)(v.a,{name:"basic",className:"form",size:"middle",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(f.jsx)(v.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(f.jsx)(w.a,{placeholder:"\u8bf7\u8f93\u5165",onChange:this.usernameChange})}),Object(f.jsx)(v.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(f.jsx)(w.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:this.passwordChange})}),Object(f.jsx)(v.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(f.jsx)(y.a,{children:"Remember me"})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",onClick:this.submit,children:"Submit"})})]})})})}}]),n}(a.Component)),U=Object(O.g)(T),q=n(238),B=function(){return["magenta","#ff7a45","volcano","volcano","gold","lime","green","cyan","blue","geekblue","purple","#fadb14"][parseInt(10*Math.random())]},J=(n(227),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("panel",b)}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"title text-center",children:"\u524d\u540e\u7aef\u63a5\u53e3\u6d4b\u8bd5"}),Object(f.jsxs)("ul",{className:"mt40 flex jc-sb wrap",children:[Object(f.jsx)("li",{className:"mr40",children:Object(f.jsx)(m.b,{to:"/cookie",children:Object(f.jsx)(q.a,{className:"ft24 my-tag text-center pointer",color:B(),children:"cookie"})})}),Object(f.jsx)("li",{className:"mr40",children:Object(f.jsx)(m.b,{to:"/uploadFile",children:Object(f.jsx)(q.a,{className:"ft24 my-tag text-center pointer",color:B(),children:"\u6587\u4ef6\u4e0a\u4f20"})})}),Object(f.jsx)("li",{className:"mr40",children:Object(f.jsx)(m.b,{to:"/socket",children:Object(f.jsx)(q.a,{className:"ft24 my-tag text-center pointer",color:B(),children:"web socket"})})}),Object(f.jsx)("li",{className:"mr40",children:Object(f.jsx)(m.b,{to:"/gzip",children:Object(f.jsx)(q.a,{className:"ft24 my-tag text-center pointer",color:B(),children:"\u5f00\u542fgzip"})})})]})]})}}]),n}(a.Component)),E=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getCookie=function(){M().then((function(){x.b.success("cookie \u4e0b\u53d1\u6210\u529f")}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"mt40",children:Object(f.jsx)("div",{className:"handles flex jc-sb",children:Object(f.jsx)(k.a,{onClick:this.getCookie,children:"\u6a21\u62df\u767b\u5f55"})})})}}]),n}(a.Component),V=n(237),G=n(236),H=(n(228),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).getList=function(){var e;P(z,e).then((function(e){console.log("getFileList",e),c.setState({list:e.data.list})}))},c.selectFile=function(){c.myRef.current.click()},c.upload=function(e){console.log(e);var t,n=e.target.files[0],a=new FormData;a.append("file",n),(t=a,P(L,t)).then((function(){c.getList()}))},c.deleteFile=function(e){var t;(t={filePath:e},P(I,t)).then((function(){c.getList()}))},c.downloadFile=function(e){window.open(e)},c.myRef=i.a.createRef(),c.state={list:[]},c}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"mt40 flex jc-c ai-c",children:[Object(f.jsx)(k.a,{type:"primary",onClick:this.selectFile,children:"\u4e0a\u4f20\u6587\u4ef6"}),Object(f.jsx)("input",{ref:this.myRef,className:"display-none",type:"file",onChange:this.upload})]}),Object(f.jsx)("div",{className:"list mt40",children:this.state.list.map((function(t){return Object(f.jsxs)("div",{className:"list-item flex jc-sb",children:[Object(f.jsx)("div",{className:"name",children:t.name}),Object(f.jsxs)("div",{className:"handles pointer",children:[Object(f.jsx)(V.a,{onClick:function(){e.downloadFile(t.url)}}),Object(f.jsx)(G.a,{onClick:function(){e.deleteFile(t.path)}})]})]})}))})]})}}]),n}(a.Component)),K=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:"\u521b\u5efa\u4e00\u4e2asocket"})}}]),n}(a.Component),Q=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:"gzip"})}}]),n}(a.Component),W=(n(229),Object(r.b)("globalStore")(D=Object(r.c)(D=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).logout=function(){R().then((function(){e.props.globalStore.setLoginStatus(!1),window.location.href=window.location.origin+"/login"}))},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){console.log("mountex",this.props.globalStore)}},{key:"render",value:function(){var e=this.props.globalStore.isLogin;return console.log(e,"app"),Object(f.jsx)("div",{className:"App wh-full",children:Object(f.jsxs)(m.a,{children:[Object(f.jsxs)("div",{className:"home",children:[e?Object(f.jsxs)("div",{children:["\u5df2\u767b\u5f55",Object(f.jsx)(k.a,{onClick:this.logout,type:"link",size:"small",children:"\u3010\u9000\u51fa\u3011"})]}):null,e?Object(f.jsx)(O.a,{to:"/panel"}):Object(f.jsx)(O.a,{to:"/login"})]}),Object(f.jsxs)(O.d,{children:[Object(f.jsx)(O.b,{path:"/login",children:Object(f.jsx)(U,{})}),Object(f.jsx)(g,{path:"/panel",children:Object(f.jsx)(J,{})}),Object(f.jsx)(g,{path:"/cookie",children:Object(f.jsx)(E,{})}),Object(f.jsx)(g,{path:"/uploadFile",children:Object(f.jsx)(H,{})}),Object(f.jsx)(g,{path:"/socket",children:Object(f.jsx)(K,{})}),Object(f.jsx)(g,{path:"/gzip",children:Object(f.jsx)(Q,{})})]})]})})}}]),n}(a.Component))||D)||D),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};s.a.render(Object(f.jsx)(r.a,Object(c.a)(Object(c.a)({},b),{},{children:Object(f.jsx)(W,{})})),document.getElementById("root")),X()}},[[230,1,2]]]);
//# sourceMappingURL=main.b853c1c7.chunk.js.map